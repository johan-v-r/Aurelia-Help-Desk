<template>
  <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <ul class="nav navbar-nav tabs">

      <!--One li per tab; Apply active class when tab.isActive-->
      <li repeat.for="tab of tabs" click.delegate="middleCloseTab($event, tab)" class="${tab.isActive ? 'active' : ''}">
        <a route-href="route.bind: tab.route; params.bind: tab.params">${tab.title}</a><!--This link should navigate to the tab using tab.route and tab.params.-->
        <a href="#" click.trigger="closeTab(tab)" ><!--This link should invoke closeTab and pass the tab.-->
          <i class="fa fa-times"></i>
        </a>
      </li>

      <li class="dropdown add">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          <i class="fa fa-plus"></i>add
        </a>
        <ul class="dropdown-menu">
          <li>
            <a route-href="route: thread; params.bind: { id:'new' }"><i class="icon-ticket"></i> New Ticket</a>
          </li>
          <li>
            <a route-href="route: user; params.bind: { id:'new' }"><i class="icon-group"></i> New User</a>
          </li>
        </ul>
      </li>
    </ul>

    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="avatar dropdown-toggle" data-toggle="dropdown">
          <img src="${user.iconUrl}" title.bind="user.username">
          <b class="caret"></b>
        </a>
        <ul class="dropdown-menu" role="menu">
          <li role="presentation">
            <a route-href="route: settings"><i class="fa fa-cog"></i> Settings</a>
          </li>
          <li role="presentation">
            <a route-href="route: help"><i class="fa fa-envelope"></i> Help</a>
          </li>
          <li role="presentation" class="divider"></li>
          <li role="presentation">
            <a href="#" click.trigger="logout()"><i class="fa fa-power-off"></i> Logout</a>
          </li>
        </ul>
      </li>
    </ul>
  </nav>
</template>